(()=>{var fe=(e={})=>{let{className:t="",children:o,squire:r,tag:s="div"}=e,n="link-list";return t&&(n+=` ${t}`),r&&(n+=" link-list--squire"),`
      <${s} class="${n}">
        ${o?.map(i=>`<div class="link-list__item">${i}</div>`).join("")}
      </${s}>
    `},$=fe;var ue=({message:e,children:t}={message:"Unknown error"})=>`
  <div class="error">
    <div class="card error__card">
      <p>${e}</p>
      ${$({children:t})}
    </div>
  </div>
`,k=ue;var he=(e={})=>{let{className:t="link",children:o,tag:r="a",to:s="#",title:n="",onClick:i}=e,u=g();return setTimeout(()=>{i&&u.current&&u.current.addEventListener("click",i)}),`
      <${r} class="${t} link" href="${s}" title="${n}" ref="${u}">
        ${o?.join?.("")}
      </${r}>
    `},a=he;var K=e=>k({message:e.message,children:[a({to:"#/login",title:"Go to login page",children:["Log in"]})]});var v="ae0dcffd947e0ca15a12",I="user repo",D="Access token not provided",p="Page not found",O="Wrong request";var B=(e={message:p})=>k({message:e.message,children:[a({to:"#",title:"Go to home page",children:["Home"]}),a({onClick:()=>{history.go(-1)},title:"Go back",children:["Back"]})]});var G=e=>k({message:e.message,children:[a({onClick:()=>{location.reload()},title:"Reload",children:["Reload"]}),a({onClick:()=>{history.go(-1)},title:"Go back",children:["Back"]})]});var b=!0,y=e=>{if(typeof window=="undefined")return;b&&typeof Sentry!="undefined"&&Sentry.captureException(e);let t=document.getElementById("root");if(t!=null){if(e.message===p){t.innerHTML=B(e);return}if(e.message===D){t.innerHTML=K(e);return}t.innerHTML=G(e)}},l=b?()=>{}:(...e)=>{console.debug(...e)};var c=b?()=>{}:(...e)=>{console.info(...e)},N=b?()=>{}:(...e)=>{console.log(...e)};var w=e=>{let{protocol:t,hash:o,pathname:r}=new URL(`${e?.destination?.url||document.location}`);return`${r.replace("index.html","")}${o.slice(2)}`},z=e=>e.replace(/[&<"']/g,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;";default:return"&#039;"}});var ke=async e=>{if(!e)return;l("Requesting access_token",{code:e,clientId:v});let{access_token:t,scope:o,token_type:r}=await fetch(`https://qilg4ch66b3vpgtevzccb5meum0ttfcl.lambda-url.eu-north-1.on.aws/?code=${e}&client_id=${v}`).then(s=>s.json());window.sessionStorage?.setItem("access_token",t),window.sessionStorage?.setItem("scope",o),window.sessionStorage?.setItem("token_type",r),document.location.href="/#/profile"},ve=async e=>{let{protocol:t,hash:o,search:r}=location,s=window.sessionStorage?.getItem("state"),n=window.sessionStorage?.getItem("code");l("Checking GET params",{protocol:t,hash:o,search:r,state:s});let i=new URLSearchParams(r);if(i.get("state")!==s)return window.history?.go(-2);ke(i.get("code")||void 0)},W=ve;var J=`query RepoFile($repo_owner: String!, $repo_name: String!, $object_path: String!) {
  repository(owner: $repo_owner, name: $repo_name) {
    object(expression: $object_path) {
      ... on Blob {
        byteSize
        text
      }
    }
  }
}
# {
#   "repo_name": "iegik.github.com",
#   "repo_owner": "iegik",
#   "object_path": "gh-pages: data/home.json"
# }`;var V=`query GetUser($login:String!) {
  user(login: $login) {
    avatarUrl
    login
  }
}
`;var we=async e=>{let{data:t,errors:o}=await e.json();if(o)throw o[0];return t},j=class{constructor(){this.repoName="iegik.github.com";this.repoOwner="iegik";this.storeRoot="gh-pages:data"}static getInstance(){return this.instance}async request({query:t,variables:o}){if(typeof window=="undefined")return;let r=window.sessionStorage?.getItem("access_token"),s=window.sessionStorage?.getItem("token_type"),n=await fetch("https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`${s} ${r}`},body:JSON.stringify({query:t,variables:o})});return we(n)}async getFile(t){let o=await this.request({query:J,variables:{repo_name:this.repoName,repo_owner:this.repoOwner,object_path:`${this.storeRoot}${t}.json`}});if(!o)throw Error(O);let{repository:{object:r}}=o;if(!r)throw Error(p);let{text:s}=r;return JSON.parse(s)}async getUserInfo(){let{user:t}=await this.request({query:V,variables:{login:this.repoOwner}});if(!t)throw Error(O);return t}},T=j;T.instance=new j;var R=T;var xe=async e=>{let[{isLoaded:t},o]=f();t||(async()=>{let s=w(),n=await R.getInstance().getFile(s);o({data:n,isLoaded:!0})})()},Q=xe;var $e=e=>e.json(),P=class{constructor(){}static getInstance(){return this.instance}async request(t){let o=await fetch(`${location.protocol}//${location.host}/data${t}`,{headers:{"Content-Type":"application/json",Accept:"application/json"}});return $e(o)}async getFile(t){let o=await this.request(`${t}.json`);if(!o)throw Error(p);return o}},C=P;C.instance=new P;var X=C;var be=async e=>{let[t={},o]=f();c("PreviewService",{state:t,setUserInfo:o});let r=w(),s=await X.getInstance().getFile(r);c(`File ${r} loaded`,{data:s,state:t}),o(s)},Y=be;var ye=async e=>{let[{avatarUrl:t},o]=f();t||(async()=>{let{avatarUrl:s,login:n}=await R.getInstance().getUserInfo();o({children:[{tag:"img",src:s},{tag:"span",children:n}]})})()},Z=ye;var Re={oauth:W,editor:Q,preview:Y,userInfo:Z},ee=Re;var te=class{constructor(){this.id=null}toString(){let t=btoa(`${Math.ceil(Math.random()*1e13)+ +new Date}`).slice(10,18);return this.id=this.id||`ref-${t}`}get current(){return typeof window=="undefined"||typeof document=="undefined"?null:document.querySelector(`[ref=${this.id}]`)}},g=()=>new te,f=e=>typeof history=="undefined"?[]:[e||history.state||{},(t,o,r)=>history.pushState({...history.state,...t},o||"")],_e={attributes:!0,childList:!0,subtree:!0},Ee=(e,t)=>{for(let o of e)o.type==="childList"?N("A child node has been added or removed.",{ref:o.target.getAttribute("ref")}):o.type==="attributes"&&N(`The ${o.attributeName} attribute was modified.`)},M=(e={})=>{l({props:e});let{tag:t="div",className:o="",children:r=[],services:s=[],...n}=e,i=g(),[u,S]=f(),ge=m=>h=>{l(m,{navigationEvent:h}),i?.current&&(i.current.innerHTML=M(history.state||{}))};navigation?.addEventListener("navigate",ge("navigate")),setTimeout(async()=>{let m=async()=>{l("ref",{ref:i,state:history.state,services:s});let h=new MutationObserver(Ee);h.observe(i.current,_e),i.current.addEventListener("DOMRemoved",()=>{c("DOMRemoved"),navigation?.removeEventListener("navigate",popstate),h.disconnect()}),await Promise.all(s?.map(x=>ee[x]?.(i))).catch(x=>{y(x)}),S({services:null})};s?.length&&m()});let A=Array.isArray(r)?r.map(m=>m instanceof Object?M(m??{}):`${m}`).join?.(""):z(r),H=Object.entries(n)?.reduce?.((m,[h,x])=>`${m} ${h}="${x}"`,"");return l("Rendering",{content:A,restProps:H}),`
    <${t} class="${o}" ref="${i}" ${H}>
      ${A}
    </${t}>
  `},oe=M;var re=new Map;var Se=({className:e,name:t}={name:"unknown"})=>{let o=g();return setTimeout(()=>{if(typeof window=="undefined"||typeof document=="undefined")return;let r=document.getElementById(`sprite-${t}`)?.getAttribute("viewBox")||"0 0 0 0";o.current?.setAttribute("viewBox",r)}),`
    <svg class="${e}" preserveAspectRatio="xMidYMid meet" viewBox="${re.get(t)?.viewBox||"0 0 0 0"}" ref="${o}">
      <use xlink:href="#sprite-${t}" />
    </svg>
  `},d=Se;var _=0,F=!1,E="",se=[],U="\u{1F34F},\u{1F330},\u{1F34B},\u{1F345},\u{1F346},\u{1F347},\u{1F353},\u{1F349},\u{1F350},\u{1F352},\u{1F351},\u{1F951}".split(","),{floor:Ie,random:Oe}=Math,Ne=e=>e[Ie(Oe()*e.length)],q=()=>{if(F)return E;let[e,t,o]=[U,U,U].flatMap(Ne);if(E=`${e} ${t} ${o}`,l("Reels",{a:e,b:t,c:o,tries:_}),e==t&&t==o){let r=`
            ${E}
    You won in ${_} tries`;F=!0,se.push(()=>{setTimeout(()=>{c(r),alert(r),F=!1})}),_=0}else _++;return E},Te=()=>{let e=g();return setTimeout(()=>{if(typeof window=="undefined")return;new MutationObserver((o,r)=>{for(let s of o)if(s.type==="childList"){let n=se.pop();n&&n()}}).observe(e.current,{childList:!0}),e.current?.addEventListener("click",()=>{!e.current||(e.current.innerHTML=q())}),document.addEventListener("keydown",o=>{o.isComposing||o.keyCode===229||o.which!==13&&o.which!==32||!e.current||(e.current.innerHTML=q())})}),`
    <div class="slot-machine">
      ${d({name:"slot-machine-icon",className:"slot-machine__icon"})}
      <span class="slot-machine__reels" ref="${e}">${q()}</span>
    </div>
  `},ne=Te;var je={"image/webp":"webp","image/jpeg":"jpg","image/png":"png"},Ce={types:"",sizes:"",src:""},Pe=({types:e,sizes:t,src:o}=Ce)=>Object.entries(je).filter(([r,s])=>e.includes(s)).flatMap(([r,s])=>`
    <source type="${r}" srcset="${t.split(",").map(n=>o.replace(new RegExp(`.(${e})$`),`_${n}.${s} ${n}w`))}" />
  `).join(""),Me=e=>{if(!e)return"";let{src:t,ratio:o,sizes:r,types:s="png|webp",alt:n="",itemprop:i=""}=e,[u,S]=o.split(":");return`
    <picture>
      ${Pe({types:s,sizes:r,src:t})}
      <img src="${s.includes("webp")?t.replace(/\..*$/,".webp"):t}" width="${u}" height="${S}" alt="${n}" itemprop="${i}" />
    </picture>
  `},ie=Me;var ae=`XkddddddddddxxxkxxdddxxxxkxdOKKKkodo
MkdddxxxxxddkkkkkkkkddddxxxdkWWNOodo
WkdddddxxxddkkkxxkkkkOkxxxddxNMWKdod
Kxdddddxddxkkkoll:'';cloddxdxKWWXkod
;;::oxxololc;''..........,;:::;;:;;:
xxdxxxd:'.......''''''.......odxxddd
kkkxkkc....''''',;cc:,'',,...clccccl
xxxxxxc..;xoc:,;:lxko:,,:ld,:llllllc
xxkxddddoxKK0kkkkk0K0OkkOKKkoollllcl
oodxxddkxkKK0kdodl:ccldlok0Ooooollll
ooodxxxkKx0ko:::::;;:::;;lxOddolllll
oooooddddokkd;,coxkkkxl:;oxooollllcc
oodooolooocooccxkxoodkkolollloollllc
ddd,'''',..''',cddl:oxo:,:llllllllll
ddd,,,'........',;;;::,..,lloooolllc
odd:'cc:;,'''..........''loodolllllc
llcc:;:::::;,''........;ooloodolllll
cccc:,:c:;,,''',,'..'''cooollloolllc
`;var Fe=()=>`
    <header class="header">
      <a href="#home" class="header__avatar" alt="avatar">${ie({itemprop:"photo",src:"home/images/artursjansons.jpg",ratio:"1:1",sizes:"432,216,64",types:"jpg|png|webp",alt:ae})}</a>
    </header>
  `,ce=Fe;var Ue=()=>`
    ${ce()}
    <article lang="en">
      <section id="home" itemscope itemtype="https://schema.org/Person">
        <header>
          <h2 itemprop="name" class="h2">
            <span itemprop="givenName">Art\u016Brs</span>
            <span itemprop="familyName">Jansons</span>
          </h2>
          <span itemprop="jobTitle" class="subtitle">Software Developer</span>
          <br>
            <span itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
              <span itemprop="addressLocality">\u{1F1F7}\u{1F1FA} St.Petersburg, Russia</span>
            </span>
            <a href="callto:+79213900737"><i class="fa fa-whatsapp"></i><span itemprop="telephone">+7-921-39-00-737</span></a>
            <a href="mailto:artur.janson+github@yandex.ru?title=iegik.github.io:contact" itemprop="email">artur.janson@yandex.ru</a>
          ${$({squire:!0,children:[a({to:"https://linkedin.com/in/iegik",title:"LinkedIn",children:[d({name:"linkedin-icon",className:"link-list__icon"})]}),a({to:"https://github.com/iegik",title:"GitHub",children:[d({name:"github-icon",className:"link-list__icon"})]}),a({to:"https://profile.codersrank.io/user/iegik",title:"Coders Rank",children:[d({name:"codersrank-icon",className:"link-list__icon"})]}),a({to:"https://jsfiddle.net/user/iegik",title:"JSFiddle",children:[d({name:"jsfiddle-icon",className:"link-list__icon"})]}),a({to:"https://stackoverflow.com/users/771471/iegik",title:"Stack Overflow",children:[d({name:"stackoverflow-icon",className:"link-list__icon"})]})]})}
          <div class="network">
            ${a({to:"/login/",title:"Login",children:["\u{1F6AA}"]})}
          </div>
        </header>
      </section>
    </article>
    <footer>
      ${ne()}
    </footer>
  `,pe=Ue;var qe=(e={})=>{let{className:t="",children:o,tag:r="button",onClick:s,type:n}=e,i=g();return setTimeout(()=>{s&&i.current?.addEventListener("click",s)}),`
      <${r} class="${t}" ref="${i}" type="${n}">
        ${o?.join("")}
      </${r}>
    `},le=qe;var de="^[\\d\\w\\-\\.]+$",_o=new RegExp(de);var Ae=()=>{if(typeof document=="undefined"||typeof window=="undefined"||typeof window.sessionStorage=="undefined")return;let e=document.querySelector('[name="login"]');if(e.validity.valid===!1)return;let t=e?.value,o=btoa(`${+new Date}`).slice(10,18);window.sessionStorage?.setItem("state",o);let r=`https://github.com/login/oauth/authorize?client_id=${v}&login=${encodeURIComponent(t)}&scope=${encodeURIComponent(I)}&state=${o}`;c(`Navigated to ${r}`,{clientId:v,scope:I,state:o}),document.location.href=r},He=()=>`
    <div class="login">
      <form>
        <input type="text" name="login" placeholder="username" pattern="${de}" />
        ${le({className:"login__btn",children:["Login with ",d({name:"github-logo",className:"login__btn__icon"})],onClick:Ae,type:"submit"})}
      </form>
    </div>
  `,me=He;var L=e=>oe({children:["Loading..."],...e}),Ke=(e="/")=>{switch(c(`Loading ${e}`),!0){case/^\/login\/?$/.test(e):return me();case/^\/oauth\/?$/.test(e):return L({services:["oauth"]});case/^\/profile\/?$/.test(e):return L({component:"UserInfo",className:"user-info",services:["userInfo"]});case/^\/editor\/?$/.test(e):return L({services:["editor"]});case/^\/preview\/?$/.test(e):return L({services:["preview"]});case(e==="/"||e===""):return pe();default:throw Error(p)}},De=e=>{let{error:t}=e;y(t)},Be=e=>{let t=w(e);if(typeof window!="undefined"&&window?.document){addEventListener("error",De);let o=document.getElementById("root");if(o==null)return;o.innerHTML=Ke(t)}};Be();})();
//# sourceMappingURL=router.min.js.map
