(()=>{var me=(e={})=>{let{className:t="",children:o,squire:r,tag:s="div"}=e,n="link-list";return t&&(n+=` ${t}`),r&&(n+=" link-list--squire"),`
      <${s} class="${n}">
        ${o?.map(i=>`<div class="link-list__item">${i}</div>`).join("")}
      </${s}>
    `},$=me;var ge=({message:e,children:t}={message:"Unknown error"})=>`
  <div class="error">
    <div class="card error__card">
      <p>${e}</p>
      ${$({children:t})}
    </div>
  </div>
`,k=ge;var fe=(e={})=>{let{className:t="link",children:o,tag:r="a",to:s="#",title:n="",onClick:i}=e,u=d();return setTimeout(()=>{i&&u.current&&u.current.addEventListener("click",i)}),`
      <${r} class="${t} link" href="${s}" title="${n}" ref="${u}">
        ${o?.join?.("")}
      </${r}>
    `},a=fe;var K=e=>k({message:e.message,children:[a({to:"#/login",title:"Go to login page",children:["Log in"]})]});var v="ae0dcffd947e0ca15a12",L="user repo",D="Access token not provided",c="Page not found",S="Wrong request";var B=(e={message:c})=>k({message:e.message,children:[a({to:"#",title:"Go to home page",children:["Home"]}),a({onClick:()=>{history.go(-1)},title:"Go back",children:["Back"]})]});var G=e=>k({message:e.message,children:[a({onClick:()=>{location.reload()},title:"Reload",children:["Reload"]}),a({onClick:()=>{history.go(-1)},title:"Go back",children:["Back"]})]});var b=!0,y=e=>{if(typeof window=="undefined")return;b&&typeof Sentry!="undefined"&&Sentry.captureException(e);let t=document.getElementById("root");if(t!=null){if(e.message===c){t.innerHTML=B(e);return}if(e.message===D){t.innerHTML=K(e);return}t.innerHTML=G(e)}},g=b?()=>{}:(...e)=>{console.debug(...e)};var m=b?()=>{}:(...e)=>{console.info(...e)},I=b?()=>{}:(...e)=>{console.log(...e)};var w=e=>{let{protocol:t,hash:o,pathname:r}=new URL(`${e?.destination?.url||document.location}`);return`${r.replace("index.html","")}${o.slice(2)}`},z=e=>e.replace(/[&<"']/g,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;";default:return"&#039;"}});var ue=async e=>{if(!e)return;g("Requesting access_token",{code:e,clientId:v});let{access_token:t,scope:o,token_type:r}=await fetch(`https://qilg4ch66b3vpgtevzccb5meum0ttfcl.lambda-url.eu-north-1.on.aws/?code=${e}&client_id=${v}`).then(s=>s.json());window.sessionStorage?.setItem("access_token",t),window.sessionStorage?.setItem("scope",o),window.sessionStorage?.setItem("token_type",r),document.location.href="/#/profile"},he=async e=>{let{protocol:t,hash:o,search:r}=location,s=window.sessionStorage?.getItem("state"),n=window.sessionStorage?.getItem("code");g("Checking GET params",{protocol:t,hash:o,search:r,state:s});let i=new URLSearchParams(r);if(i.get("state")!==s)return window.history?.go(-2);ue(i.get("code")||void 0)},W=he;var J=`query RepoFile($repo_owner: String!, $repo_name: String!, $object_path: String!) {
  repository(owner: $repo_owner, name: $repo_name) {
    object(expression: $object_path) {
      ... on Blob {
        byteSize
        text
      }
    }
  }
}
# {
#   "repo_name": "iegik.github.com",
#   "repo_owner": "iegik",
#   "object_path": "gh-pages: data/home.json"
# }`;var V=`query GetUser($login:String!) {
  user(login: $login) {
    avatarUrl
    login
  }
}
`;var ke=async e=>{let{data:t,errors:o}=await e.json();if(o)throw o[0];return t},N=class{constructor(){this.repoName="iegik.github.com";this.repoOwner="iegik";this.storeRoot="gh-pages:data"}static getInstance(){return this.instance}async request({query:t,variables:o}){if(typeof window=="undefined")return;let r=window.sessionStorage?.getItem("access_token"),s=window.sessionStorage?.getItem("token_type"),n=await fetch("https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`${s} ${r}`},body:JSON.stringify({query:t,variables:o})});return ke(n)}async getFile(t){let o=await this.request({query:J,variables:{repo_name:this.repoName,repo_owner:this.repoOwner,object_path:`${this.storeRoot}${t}.json`}});if(!o)throw Error(S);let{repository:{object:r}}=o;if(!r)throw Error(c);let{text:s}=r;return JSON.parse(s)}async getUserInfo(){let{user:t}=await this.request({query:V,variables:{login:this.repoOwner}});if(!t)throw Error(S);return t}},O=N;O.instance=new N;var R=O;var ve=async e=>{let[{isLoaded:t},o]=f();t||(async()=>{let s=w(),n=await R.getInstance().getFile(s);o({data:n,isLoaded:!0})})()},Q=ve;var we=e=>e.json(),j=class{constructor(){}static getInstance(){return this.instance}async request(t){let o=await fetch(`${location.protocol}//${location.host}/data${t}`,{headers:{"Content-Type":"application/json",Accept:"application/json"}});return we(o)}async getFile(t){let o=await this.request(`${t}.json`);if(!o)throw Error(c);return o}},T=j;T.instance=new j;var X=T;var xe=async e=>{let[t={},o]=f();m("PreviewService",{state:t,setUserInfo:o});let r=w(),s=await X.getInstance().getFile(r);m(`File ${r} loaded`,{data:s,state:t}),o(s)},Y=xe;var $e=async e=>{let[{avatarUrl:t},o]=f();t||(async()=>{let{avatarUrl:s,login:n}=await R.getInstance().getUserInfo();o({children:[{tag:"img",src:s},{tag:"span",children:n}]})})()},Z=$e;var be={oauth:W,editor:Q,preview:Y,userInfo:Z},ee=be;var te=class{constructor(){this.id=null}toString(){let t=btoa(`${Math.ceil(Math.random()*1e13)+ +new Date}`).slice(10,18);return this.id=this.id||`ref-${t}`}get current(){return typeof window=="undefined"||typeof document=="undefined"?null:document.querySelector(`[ref=${this.id}]`)}},d=()=>new te,f=e=>typeof history=="undefined"?[]:[e||history.state||{},(t,o,r)=>history.pushState({...history.state,...t},o||"")],ye={attributes:!0,childList:!0,subtree:!0},Re=(e,t)=>{for(let o of e)o.type==="childList"?I("A child node has been added or removed.",{ref:o.target.getAttribute("ref")}):o.type==="attributes"&&I(`The ${o.attributeName} attribute was modified.`)},C=(e={})=>{g({props:e});let{tag:t="div",className:o="",children:r=[],services:s=[],...n}=e,i=d(),[u,E]=f(),q=l=>h=>{g(l,{navigationEvent:h}),i?.current&&(i.current.innerHTML=C(history.state||{}))};addEventListener("popstate",q("popstate")),navigation?.addEventListener("navigate",q("navigate")),setTimeout(async()=>{let l=async()=>{g("ref",{ref:i,state:history.state,services:s});let h=new MutationObserver(Re);h.observe(i.current,ye),i.current.addEventListener("DOMRemoved",()=>{m("DOMRemoved"),removeEventListener("popstate",popstate),navigation?.removeEventListener("navigate",popstate),h.disconnect()}),await Promise.all(s?.map(x=>ee[x]?.(i))).catch(x=>{y(x)}),E({services:null})};s?.length&&l()});let A=Array.isArray(r)?r.map(l=>l instanceof Object?C(l??{}):`${l}`).join?.(""):z(r),H=Object.entries(n)?.reduce?.((l,[h,x])=>`${l} ${h}="${x}"`,"");return g("Rendering",{content:A,restProps:H}),`
    <${t} class="${o}" ref="${i}" ${H}>
      ${A}
    </${t}>
  `},oe=C;var re=new Map;var Ee=({className:e,name:t}={name:"unknown"})=>{let o=d();return setTimeout(()=>{if(typeof window=="undefined"||typeof document=="undefined")return;let r=document.getElementById(`sprite-${t}`)?.getAttribute("viewBox")||"0 0 0 0";o.current?.setAttribute("viewBox",r)}),`
    <svg class="${e}" preserveAspectRatio="xMidYMid meet" viewBox="${re.get(t)?.viewBox||"0 0 0 0"}" ref="${o}">
      <use xlink:href="#sprite-${t}" />
    </svg>
  `},p=Ee;var P=0,M=!1,F="\u{1F34F},\u{1F330},\u{1F34B},\u{1F345},\u{1F346},\u{1F347},\u{1F353},\u{1F349},\u{1F350},\u{1F352},\u{1F351},\u{1F951}".split(","),{floor:Le,random:Se}=Math,Ie=e=>e[Le(Se()*e.length)],U=()=>{if(M)return"";let[e,t,o]=[F,F,F].flatMap(Ie);return e==t&&t==o?(M=!0,setTimeout(()=>{typeof window!="undefined"&&alert(`You won in ${P} tries`),M=!1},100),P=0):P++,`${e} ${t} ${o}`},Oe=()=>{let e=d();return setTimeout(()=>{e.current?.addEventListener("click",()=>{!e.current||(e.current.innerHTML=U())}),!(typeof window=="undefined"||typeof document=="undefined")&&document.addEventListener("keyup",t=>{t.isComposing||t.keyCode===229||t.which!==13&&t.which!==32||!e.current||(e.current.innerHTML=U())})}),`
    <div class="slot-machine">
      ${p({name:"slot-machine-icon",className:"slot-machine__icon"})}
      <span class="slot-machine__reels" ref="${e}">${U()}</span>
    </div>
  `},se=Oe;var Ne={"image/webp":"webp","image/jpeg":"jpg","image/png":"png"},Te={types:"",sizes:"",src:""},je=({types:e,sizes:t,src:o}=Te)=>Object.entries(Ne).filter(([r,s])=>e.includes(s)).flatMap(([r,s])=>`
    <source type="${r}" srcset="${t.split(",").map(n=>o.replace(new RegExp(`.(${e})$`),`_${n}.${s} ${n}w`))}" />
  `).join(""),Ce=e=>{if(!e)return"";let{src:t,ratio:o,sizes:r,types:s="png|webp",alt:n="",itemprop:i=""}=e,[u,E]=o.split(":");return`
    <picture>
      ${je({types:s,sizes:r,src:t})}
      <img src="${s.includes("webp")?t.replace(/\..*$/,".webp"):t}" width="${u}" height="${E}" alt="${n}" itemprop="${i}" />
    </picture>
  `},ne=Ce;var ie=`XkddddddddddxxxkxxdddxxxxkxdOKKKkodo
MkdddxxxxxddkkkkkkkkddddxxxdkWWNOodo
WkdddddxxxddkkkxxkkkkOkxxxddxNMWKdod
Kxdddddxddxkkkoll:'';cloddxdxKWWXkod
;;::oxxololc;''..........,;:::;;:;;:
xxdxxxd:'.......''''''.......odxxddd
kkkxkkc....''''',;cc:,'',,...clccccl
xxxxxxc..;xoc:,;:lxko:,,:ld,:llllllc
xxkxddddoxKK0kkkkk0K0OkkOKKkoollllcl
oodxxddkxkKK0kdodl:ccldlok0Ooooollll
ooodxxxkKx0ko:::::;;:::;;lxOddolllll
oooooddddokkd;,coxkkkxl:;oxooollllcc
oodooolooocooccxkxoodkkolollloollllc
ddd,'''',..''',cddl:oxo:,:llllllllll
ddd,,,'........',;;;::,..,lloooolllc
odd:'cc:;,'''..........''loodolllllc
llcc:;:::::;,''........;ooloodolllll
cccc:,:c:;,,''',,'..'''cooollloolllc
`;var Pe=()=>`
    <header class="header">
      <a href="#home" class="header__avatar" alt="avatar">${ne({itemprop:"photo",src:"home/images/artursjansons.jpg",ratio:"1:1",sizes:"432,216,64",types:"jpg|png|webp",alt:ie})}</a>
    </header>
  `,ae=Pe;var Me=()=>`
    ${ae()}
    <article lang="en">
      <section id="home" itemscope itemtype="https://schema.org/Person">
        <header>
          <h2 itemprop="name" class="h2">
            <span itemprop="givenName">Art\u016Brs</span>
            <span itemprop="familyName">Jansons</span>
          </h2>
          <span itemprop="jobTitle" class="subtitle">Software Developer</span>
          <br>
            <span itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
              <span itemprop="addressLocality">\u{1F1F7}\u{1F1FA} St.Petersburg, Russia</span>
            </span>
            <a href="callto:+79213900737"><i class="fa fa-whatsapp"></i><span itemprop="telephone">+7-921-39-00-737</span></a>
            <a href="mailto:artur.janson+github@yandex.ru?title=iegik.github.io:contact" itemprop="email">artur.janson@yandex.ru</a>
          ${$({squire:!0,children:[a({to:"https://linkedin.com/in/iegik",title:"LinkedIn",children:[p({name:"linkedin-icon",className:"link-list__icon"})]}),a({to:"https://github.com/iegik",title:"GitHub",children:[p({name:"github-icon",className:"link-list__icon"})]}),a({to:"https://profile.codersrank.io/user/iegik",title:"Coders Rank",children:[p({name:"codersrank-icon",className:"link-list__icon"})]}),a({to:"https://jsfiddle.net/user/iegik",title:"JSFiddle",children:[p({name:"jsfiddle-icon",className:"link-list__icon"})]}),a({to:"https://stackoverflow.com/users/771471/iegik",title:"Stack Overflow",children:[p({name:"stackoverflow-icon",className:"link-list__icon"})]})]})}
          <div class="network">
            ${a({to:"/login/",title:"Login",children:["\u{1F6AA}"]})}
          </div>
        </header>
      </section>
    </article>
    <footer>
      ${se()}
    </footer>
  `,ce=Me;var Fe=(e={})=>{let{className:t="",children:o,tag:r="button",onClick:s,type:n}=e,i=d();return setTimeout(()=>{s&&i.current?.addEventListener("click",s)}),`
      <${r} class="${t}" ref="${i}" type="${n}">
        ${o?.join("")}
      </${r}>
    `},pe=Fe;var le="^[\\d\\w\\-\\.]+$",bo=new RegExp(le);var Ue=()=>{if(typeof document=="undefined"||typeof window=="undefined"||typeof window.sessionStorage=="undefined")return;let e=document.querySelector('[name="login"]');if(e.validity.valid===!1)return;let t=e?.value,o=btoa(`${+new Date}`).slice(10,18);window.sessionStorage?.setItem("state",o);let r=`https://github.com/login/oauth/authorize?client_id=${v}&login=${encodeURIComponent(t)}&scope=${encodeURIComponent(L)}&state=${o}`;m(`Navigated to ${r}`,{clientId:v,scope:L,state:o}),document.location.href=r},qe=()=>`
    <div class="login">
      <form>
        <input type="text" name="login" placeholder="username" pattern="${le}" />
        ${pe({className:"login__btn",children:["Login with ",p({name:"github-logo",className:"login__btn__icon"})],onClick:Ue,type:"submit"})}
      </form>
    </div>
  `,de=qe;var _=e=>oe({children:["Loading..."],...e}),Ae=(e="/")=>{switch(m(`Loading ${e}`),!0){case/^\/login\/?$/.test(e):return de();case/^\/oauth\/?$/.test(e):return _({services:["oauth"]});case/^\/profile\/?$/.test(e):return _({component:"UserInfo",className:"user-info",services:["userInfo"]});case/^\/editor\/?$/.test(e):return _({services:["editor"]});case/^\/preview\/?$/.test(e):return _({services:["preview"]});case(e==="/"||e===""):return ce();default:throw Error(c)}},He=e=>{let{error:t}=e;y(t)},Ke=e=>{let t=w(e);if(typeof window!="undefined"&&window?.document){addEventListener("error",He);let o=document.getElementById("root");if(o==null)return;o.innerHTML=Ae(t)}};Ke();})();
//# sourceMappingURL=router.min.js.map
